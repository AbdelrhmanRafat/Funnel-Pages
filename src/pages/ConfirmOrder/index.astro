---
// src/pages/test-post.astro
import { test } from "../../Services/test.service";

const request = Astro.request;

if (request.method === "POST") {
  try {
    const result = await test(); // your POST request

    return new Response(null, {
      status: 302,
      headers: {
        Location: "/success", // or redirect anywhere you want
      },
    });
  } catch (err: any) {
    return new Response(null, {
      status: 302,
      headers: {
        Location: `/error?msg=${encodeURIComponent(err.message)}`,
      },
    });
  }
}

---