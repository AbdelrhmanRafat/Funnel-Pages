---
import "./NeonLogosCarousel.css";
import type { BlockData, Item } from "../../../../../lib/api/types";
import type { Language } from "../../../../../lib/utils/i18n/translations";
import { FunnelNeonComponents } from "../../../../../lib/constants/themes";
import LogosCarousel from "./LogosCarousel";

// Get initial language from cookie during SSR
const currentLang: Language = (Astro.cookies.get("lang")?.value || "ar") as Language;
const isArabic = currentLang === "ar";

const data: BlockData = Astro.props.data;
const logos: Item[] = data.items ?? [];
---

<section 
    id={FunnelNeonComponents.NeonLogosCarousel} 
    class="neon-section"
    aria-labelledby="logos-heading"
    data-component="logos-carousel-section"
>
    <!-- Section Header -->
    <div class="neon-middle-title">
        <h3 id="logos-heading">
            {isArabic ? data.title_ar : data.title_en}
        </h3>
        <div class="neon-divider mx-auto rounded-full" role="presentation"></div>
    </div>

    <!-- React Carousel Component -->
    <LogosCarousel logos={logos} client:visible />
</section>