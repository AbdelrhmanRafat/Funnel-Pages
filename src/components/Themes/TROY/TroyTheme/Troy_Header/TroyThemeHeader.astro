---
import "./TroyThemeHeader.css";
import type { BlockData } from "../../../../../lib/api/types";
import TroyLanguageSwitcher from "../UI/TroyLanguageSwitcher/TroyLanguageSwitcher.astro";

const defaultLogoSrc: string = "assets/default-logo.svg";

const data: BlockData = Astro.props.data;

const logo = data?.logo || defaultLogoSrc;
const title = data?.title;
const subtitle = data?.subtitle || "";
---

<header>
  <!-- Compact Fixed Header -->
  <div id="troy-header" class="fixed top-0 left-0 right-0 z-50 troy-header">
    
    <!-- Main Header Content -->
    <div class="container mx-auto px-4 md:px-6 py-2 md:py-3">
      
      <!-- Header Layout: Logo + Content + Language Switcher -->
      <div class="flex items-center justify-between gap-4">
        
        <!-- Logo Section - Compact -->
        <div class="flex items-center gap-3">
          <img
            id="headerLogo"
            src={logo}
            alt={title}
            class="troy-header-logo w-10 h-10 md:w-12 md:h-12 object-contain"
          />
          
          <!-- Title & Subtitle - Inline Layout -->
          <div class="flex flex-col">
            <h1 class="text-lg md:text-xl lg:text-2xl font-bold leading-tight troy-header-title">
              {title}
            </h1>
            {subtitle && (
              <p class="text-xs md:text-sm leading-tight troy-header-subtitle hidden sm:block">
                {subtitle}
              </p>
            )}
          </div>
        </div>
        
        <!-- Language Switcher -->
        <div class="flex-shrink-0">
          <TroyLanguageSwitcher />
        </div>
      </div>
    </div>
    
    <!-- Thin Bottom Accent -->
    <div class="h-0.5 troy-header-border"></div>
  </div>
  
  <!-- Minimal Content Spacer -->
  <div class="pt-16 md:pt-18 lg:pt-20"></div>
</header>

<script>
  import { initHeader } from "./TroyThemeHeader";
  initHeader();
</script>