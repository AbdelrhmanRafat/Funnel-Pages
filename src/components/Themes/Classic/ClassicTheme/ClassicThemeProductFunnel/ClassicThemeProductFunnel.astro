---
// This component handles the product purchase options and price summary section for the Classic theme.
// It allows users to select product variants (like color/size) and quantity,
// displays a summary of the price, and provides action buttons like "Add to Cart".
// Props:
// - data: An object of type BlockData, containing purchase options and related data from the API.
// - colorSizeOptions: An array of type OptionOption[], providing available color and size variants for the product.

import type { BlockData, OptionOption } from "../../../../../lib/api/types";
import DynamicPannelContainer from "../UI/Dynamic Panel Container/DynamicPannelContainer.astro"; // Component for selecting dynamic options like color/size.
import QuantityOptions from "../UI/Quantity Options/QuantityOptions.astro"; // Component for selecting product quantity.

// Retrieves data and colorSizeOptions from Astro's props.
const data: BlockData = Astro.props.data;
const colorSizeOptions : OptionOption[] = Astro.props.colorSizeOptions;
---

<!-- Quantity and Variant Selection Section -->
<div class="mb-8">
<!--   Renders quantity selection options based on Purchase Options object.  -->
  <QuantityOptions data = {data} />
  {/* Renders dynamic panels for selecting product variants like color and size. client:load ensures interactivity. */}
  <DynamicPannelContainer data={data} colorSizeOptions={colorSizeOptions} />
</div>

{/* Price Summary Section - Note: This section appears to be mostly static/hardcoded in the example. */}
{/* Ideally, these values should be dynamically calculated and updated based on user selections. */}

        {/* Main items in the price breakdown. */}
        <div class="p-6 space-y-3">
          {/* Product Quantity (Example: 3 pieces) */}
          <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="text-gray-700 font-medium">ÿßŸÑŸÖŸÜÿ™ÿ¨::</span> {/* Product: */}
              <span class="text-gray-900 font-semibold">Ÿ£ Ÿ£ ŸÇÿ∑ÿπÿ©</span> {/* 3 pieces */}
          </div>
          
          {/* Unit Price (Example: 1499 EGP) */}
          <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="text-gray-700 font-medium">ÿ≥ÿπÿ± ÿßŸÑŸÇÿ∑ÿπÿ©::</span> {/* Price per piece: */}
              <span class="text-gray-900 font-semibold">Ÿ°Ÿ§Ÿ©Ÿ© ÿ¨.ŸÖ</span> {/* 1499 EGP */}
          </div>
          
          {/* Subtotal (Example: 4497 EGP) */}
          <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="text-gray-700 font-medium">ÿßŸÑŸÖÿ¨ŸÖŸàÿπ:</span> {/* Subtotal: */}
              <span class="text-gray-900 font-semibold">Ÿ§Ÿ§Ÿ©Ÿß ÿ¨.ŸÖ</span> {/* 4497 EGP */}
          </div>
          
          {/* Shipping Cost (Example: 90 EGP) */}
          <div class="flex justify-between items-center py-2 border-b border-gray-100">
              <span class="text-gray-700 font-medium">ÿßŸÑÿ¥ÿ≠ŸÜ::</span> {/* Shipping: */}
              <span class="text-gray-900 font-semibold">Ÿ©Ÿ† ÿ¨.ŸÖ</span> {/* 90 EGP */}
          </div>
          
          {/* Discount Applied (Example: -3273 EGP) */}
          <div class="flex justify-between items-center py-2 border-b border-gray-200">
              <span class="text-gray-700 font-medium">ÿßŸÑÿÆÿµŸÖ::</span> {/* Discount: */}
              <span class="text-green-600 font-semibold">- Ÿ£Ÿ¢ŸßŸ£ ÿ¨.ŸÖ</span> {/* -3273 EGP */}
          </div>
      </div>
      
      {/* Total Price Section (Example: 40587 EGP - this seems like a typo or unrelated number based on above) */}
      <div class="bg-blue-50 px-6 py-4 border-t-2 border-blue-200 mb-3">
          <div class="flex justify-between items-center">
              <span class="text-blue-800 font-bold text-lg">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä::</span> {/* Total: */}
              <span class="text-blue-900 font-bold text-xl">Ÿ§Ÿ†Ÿ•Ÿ®Ÿß ÿ¨.ŸÖ</span> {/* 40587 EGP */}
          </div>
      </div>

{/* Action Buttons Section */}
<div class="space-y-4">
  {/* "Add to Cart" button */}
  <button
    class="btn-primary w-full py-4 rounded-2xl text-white font-bold text-lg shadow-lg"
  >
    üõí ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ© {/* Add to Cart */}
  </button>

  {/* "Add to Favorites" button */}
  <button
    class="w-full py-4 rounded-2xl border-2 border-gray-300 text-gray-700 font-bold text-lg hover:bg-gray-50 transition-colors"
  >
    ‚ù§Ô∏è ÿ£ÿ∂ŸÅ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© {/* Add to Favorites */}
  </button>
</div>