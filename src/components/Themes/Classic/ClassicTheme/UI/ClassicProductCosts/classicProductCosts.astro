---
import "./classicProductCosts.css";
import { getTranslation } from "../../../../../../lib/utils/i18n/translations";

const hasBundles : string = Astro.props.hasBundles;
// Component configuration - no longer dependent on external data
const autoUpdate = Astro.props.autoUpdate ?? true;
const showDiscountWhenZero = Astro.props.showDiscountWhenZero ?? false;
const currency = Astro.props.currency ?? getTranslation('productFunnel.currency');
---

<classic-product-funnel 
  data-funnel-auto-update={autoUpdate}
  data-funnel-show-discount-when-zero={showDiscountWhenZero}
  data-funnel-currency={currency}
  data-funnel-has-bundles={hasBundles}
>
  <div class="classic-purchase-options">
    <div class="classic-purchase-options-body">
      <div class="classic-purchase-options-content space-y-3">
        <div class="classic-purchase-row flex justify-between items-center">
          <span class="classic-purchase-label" data-translate="productFunnel.quantity">
            {getTranslation('productFunnel.quantity')}
          </span>
          <div>
            <span class="classic-purchase-value" data-funnel-price-quantity>0</span>
            <span data-translate="productFunnel.piece">
              {getTranslation('productFunnel.piece')}
            </span>
          </div>
        </div>
        
        <div class="classic-purchase-row flex justify-between items-center">
          <span class="classic-purchase-label" data-translate="productFunnel.unitPrice">
            {getTranslation('productFunnel.unitPrice')}
          </span>
          <span class="classic-purchase-value" data-funnel-price-unit>
            0 {getTranslation('productFunnel.currency')}
          </span>
        </div>
        
        <div class="classic-purchase-row flex justify-between items-center">
          <span class="classic-purchase-label" data-translate="productFunnel.subtotal">
            {getTranslation('productFunnel.subtotal')}
          </span>
          <span class="classic-purchase-value" data-funnel-price-subtotal>
            0 {getTranslation('productFunnel.currency')}
          </span>
        </div>
        
        <div class="classic-purchase-row flex justify-between items-center">
          <span class="classic-purchase-label" data-translate="productFunnel.shippingCost">
            {getTranslation('productFunnel.shippingCost')}
          </span>
          <span class="classic-purchase-value" data-funnel-price-shipping>
            0 {getTranslation('productFunnel.currency')}
          </span>
        </div>
        
        <div 
          class:list={[
            "classic-purchase-row flex justify-between items-center border-b-gray-200",
            { "hidden": !showDiscountWhenZero }
          ]}
          data-funnel-discount-container
        >
          <span class="classic-purchase-label" data-translate="productFunnel.discount">
            {getTranslation('productFunnel.discount')}
          </span>
          <span class="classic-purchase-discount" data-funnel-price-discount>
            - 0 {getTranslation('productFunnel.currency')}
          </span>
        </div>
      </div>
      
      <div class="classic-purchase-total-section">
        <div class="flex justify-between items-center">
          <span class="classic-purchase-total-label" data-translate="productFunnel.total">
            {getTranslation('productFunnel.total')}
          </span>
          <span class="classic-purchase-total-value" data-funnel-price-total>
            0 {getTranslation('productFunnel.currency')}
          </span>
        </div>
      </div>
    </div>
  </div>
</classic-product-funnel>

<script>
  import "./classicProductCosts";
</script>