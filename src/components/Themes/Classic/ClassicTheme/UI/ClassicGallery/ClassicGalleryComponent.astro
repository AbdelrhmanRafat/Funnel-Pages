---
import "./ClassicGalleryComponent.css";
import type { BlockData, GalleryImages } from "../../../../../../lib/api/types";

const data : BlockData = Astro.props.data;
const gallery : GalleryImages[] = data.galleryimages;
---
<!-- Gallery Section - Enhanced -->
<div id="classic-gallery" class="lg:w-1/2 lg:sticky lg:top-0 lg:self-start">
    <div class="flex flex-col gap-6">
        <!-- Main Image Display -->
        <div class="relative">
            <div class="classic-gallery-main">
                <img
                    id="mainImage"
                    src={gallery[0]?.src}
                    class="classic-main-image"
                    alt={gallery[0]?.alt}
                />
                
                <!-- Navigation Buttons -->
                <button
                    id="prevBtn"
                    class="classic-gallery-nav classic-gallery-nav-left"
                >
                    <svg
                        class="w-6 h-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                
                <button
                    id="nextBtn"
                    class="classic-gallery-nav classic-gallery-nav-right"
                >
                    <svg
                        class="w-6 h-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
                
                <!-- Image Counter -->
                <div class="classic-gallery-counter">
                    <span id="currentImageIndex">1</span> / <span id="totalImages">{gallery.length}</span>
                </div>
            </div>
        </div>
        
        <!-- Thumbnail Gallery -->
        <div class="classic-thumbnail-container">
            <div class="inline-flex gap-3">
                {
                  gallery.map((image, index) => (
                    <img
                        src={image.src}
                        class={`classic-thumbnail ${index === 0 ? 'classic-thumbnail-active' : ''}`}
                        data-index={index}
                        alt={image.alt}
                    />
                  ))
                }
            </div>
        </div>
    </div>
</div>
<script>
    import "./ClassicGalleryComponent";
    // The gallery will initialize automatically via the DOMContentLoaded event
</script>