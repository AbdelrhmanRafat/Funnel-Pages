---
// This component renders a preview of the product for the Classic theme.
// Props:
// - data: An object of type BlockData, containing product preview information.
import "./ClassicProductPreviewComponent.css"
import type { BlockData, ProductPreview } from "../../../../../lib/api/types";
import ClassicBuyNowButton from "../UI/ClassicBuyNowButton/ClassicBuyNowButton.astro";

const data: BlockData = Astro.props.data;
const productPreview: ProductPreview = data.productPreview ?? {} as ProductPreview;
---

<section id="classic-product-preview" class="classic-section">
    <!-- Header -->
    <div class="classic-section-header">
        <i class={productPreview.headerBadgeIcon}></i>
        <h5>{productPreview.headerBadgetext}</h5>
    </div>

    <!-- Main Content -->
    <div class="flex flex-col lg:flex-row gap-6 lg:gap-8 items-stretch">
        <!-- Video Section (3/5 width on desktop) -->
        <div class="w-full lg:w-3/5 order-2 lg:order-1">
            <div class="classic-product-video-container classic-product-video-height">
                <iframe
                    class="w-full h-full rounded-[inherit]"
                    src={productPreview.videoInfo.link}
                    title="YouTube video player"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
                <div class="classic-product-video-title">
                    <p>{productPreview.videoInfo.title}</p>
                </div>
            </div>
        </div>
                
        <!-- Features Section (2/5 width on desktop) -->
        <div class="w-full lg:w-2/5 order-1 lg:order-2">
            <div class="classic-product-features-container h-full">
                <!-- Features Header -->
                <div class="classic-product-features-header">
                    <div class="flex flex-col gap-3 sm:flex-row sm:justify-between sm:items-center sm:gap-4">
                        <h2 class="classic-product-features-title">
                            {productPreview.featuresSectionTitle}
                        </h2>
                        <div class="classic-product-views-badge flex-shrink-0">
                            <div class="flex-shrink-0">
                                <i class={productPreview.viewsIcon}></i>
                            </div>
                            <span class="truncate">{productPreview.viewsText}</span>
                        </div>
                    </div>
                </div>
                                
                <!-- Feature List -->
                <div class="flex-1 py-6">
                    <div class="space-y-6 lg:space-y-8">
                        {
                            productPreview.features.map((feature) => (
                                <div class="classic-product-feature-item">
                                    <div class="classic-product-feature-icon">
                                        <i class="fa-solid fa-circle-check"></i>
                                    </div>
                                    <div class="classic-product-feature-content flex-1 min-w-0">
                                        <div class="classic-product-feature-title">{feature.title}</div>
                                        <div class="classic-product-feature-subtitle">
                                            {feature.subtitle}
                                        </div>
                                    </div>
                                </div>
                            ))
                        }
                    </div>
                </div>
                                
                <!-- Buy Now Button -->
                <div class="mt-auto pt-4 border-t border-current/10">
                    <ClassicBuyNowButton />
                </div>
            </div>
        </div>
    </div>
</section>