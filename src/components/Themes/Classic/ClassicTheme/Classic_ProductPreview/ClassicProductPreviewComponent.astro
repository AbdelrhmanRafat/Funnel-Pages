---
// This component renders a preview of the product for the Classic theme.
// Props:
// - data: An object of type BlockData, containing product preview information.
import type { BlockData, ProductPreview } from "../../../../../lib/api/types";
import ClassicBuyNowButton from "../UI/ClassicBuyNowButton/ClassicBuyNowButton.astro";

const data: BlockData = Astro.props.data;
const productPreview: ProductPreview = data.productPreview;
---

<section id="classic-product-preview" class="classic-section">
    <!-- Header -->
    <div class="classic-section-header">
        <i class={productPreview.headerBadgeIcon}></i>
        <h5>{productPreview.headerBadgetext}</h5>
    </div>

    <!-- Main Content -->
    <div class="flex flex-col lg:flex-row gap-8 items-stretch">
        <!-- Right Side - Video (3/5 width on desktop) -->
        <div class="lg:w-3/5">
            <div
                class="w-full relative border-4 border-blue-500 h-[300px] md:h-[400px] lg:h-full rounded-xl overflow-hidden shadow-lg"
            >
                <iframe
                    class="w-full h-full"
                    src={productPreview.videoInfo.link}
                    title="YouTube video player"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
                <div
                    class="absolute text-3xl font-bold bottom-9 right-2 text-white"
                >
                    <p>{productPreview.videoInfo.title}</p>
                </div>
            </div>
        </div>
        <!-- Left Side - Features (2/5 width on desktop) -->
        <div class="lg:w-2/5 space-y-6 bg-slate-500 rounded-xl p-4">
            <div class="flex justify-between items-center border-b border-white pb-3">
                <h2
                    class="text-white text-2xl font-bold"
                >
                    {productPreview.featuresSectionTitle}
                </h2>
                <div
                    class="flex bg-gray-400 py-1 text-white px-4 rounded-2xl items-center gap-2 text-lg"
                >
                    <div>
                        <i class={productPreview.viewsIcon}></i>
                    </div>
                    <span>{productPreview.viewsText}</span>
                </div>
            </div>
            <!-- Feature List -->
            <div class="space-y-8">
                {
                    productPreview.features.map((feature) => (
                        <div class="flex items-center gap-3">
                            <div class="bg-blue-500 rounded-full p-2 flex-shrink-0">
                                <svg
                                    class="w-5 h-5 text-white"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                >
                                    <path
                                        fill-rule="evenodd"
                                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                        clip-rule="evenodd"
                                    />
                                </svg>
                            </div>
                            <div class="text-white text-right">
                                <div class="font-semibold">{feature.title}</div>
                                <div class="text-gray-300 text-sm">
                                    {feature.subtitle}
                                </div>
                            </div>
                        </div>
                    ))
                }
            </div>
            <ClassicBuyNowButton />
        </div>
    </div>
</section>
