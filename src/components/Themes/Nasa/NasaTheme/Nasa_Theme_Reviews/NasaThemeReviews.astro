---
import "./nasaThemeReviews.css";
import type { BlockData, Review } from "../../../../../lib/api/types";
import NasaBuyNowButton from "../UI/NasaBuyNowButton/NasaBuyNowButton.astro";
import { FunnelNasaComponents } from "../../../../../lib/constants/themes";

const data: BlockData = Astro.props.data;
const reviews: Review[] = data.reviews;
---

<section id={FunnelNasaComponents.NasaReviews} class="nasa-section">
  <h2 class="nasa-middle-title">{data.title}</h2>
  
  <div class="relative">
    
    <!-- Carousel Content -->
    <div 
      id="carousel" 
      class="nasa-carousel-container flex gap-6 overflow-x-auto px-4 py-2"
      style="scroll-snap-type: x mandatory;"
    >
      {reviews.map((review) => (
        <div class="nasa-review-card flex-shrink-0 w-80 p-8 flex flex-col" style="scroll-snap-align: start;">
          <!-- Profile image centered -->
          <div class="flex justify-center mb-8">
            <div class="nasa-profile-container w-24 h-24 rounded-full flex items-center justify-center">
              <img 
                src={review.image} 
                alt={`Profile of ${review.name}`} 
                class="w-20 h-20 rounded-full object-cover"
              />
            </div>
          </div>
          
          <!-- Name -->
          <h3 class="nasa-review-name text-xl font-bold text-center mb-3">{review.name}</h3>
          
          <!-- Country -->
          <p class="nasa-review-city text-sm font-medium text-center mb-6">{review.city}</p>
          
          <!-- Comment -->
          <blockquote class="nasa-review-description text-base leading-relaxed text-center flex-grow">
            "{review.description}"
          </blockquote>
        </div>
      ))}
    </div>
    
    <!-- Pagination Dots -->
    <div id="pagination-dots" class="flex justify-center mt-8 gap-3">
      <!-- Dots will be generated dynamically by TypeScript -->
    </div>
  </div>
  
  <!-- Action Button -->
  <div class="nasa-reviews-action flex justify-center mt-12">
    <NasaBuyNowButton />
  </div>
</section>

<script>
  import './nasaCarousel.ts';
</script>