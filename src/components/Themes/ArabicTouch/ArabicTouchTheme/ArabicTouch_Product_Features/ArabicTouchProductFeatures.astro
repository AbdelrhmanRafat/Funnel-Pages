---
import "./ArabicTouchProductFeatures.css"
import type { BlockData, Item } from "../../../../../lib/api/types";
import type { Language } from "../../../../../lib/utils/i18n/translations";
import { FunnelArabicTouchComponents } from "../../../../../lib/constants/themes";
import LucideIcon from "../../../../Shared/LucideIcon.astro";

// Get initial language from cookie during SSR
const currentLang: Language = (Astro.cookies.get("lang")?.value || "en") as Language;
const isArabic = currentLang === "ar";

const data: BlockData = Astro.props.data;
const productFeatures: Item[] = data.items ?? [];
const title = isArabic ? data.title_ar : data.title_en;
---

<section 
  id={FunnelArabicTouchComponents.ArabicTouchProductFeatures}
  class="arabictouch-section"
>
  <!-- Header -->
  <div class="arabictouch-section-header">
    {data.icon && <LucideIcon name={data.icon as any} width="48" height="48" />}
    <h5>{title}</h5>
  </div>
  
  <!-- Features Grid - Variation 4: Compact Icon & Text Layout -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
    {productFeatures.map((feature, index) => (
      <div class="arabictouch-features-item flex items-start gap-4 p-4 transition-all duration-300 hover:scale-105">
        <!-- Feature Icon -->
        <div class="arabictouch-features-icon flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center">
          {feature.icon ? 
            <LucideIcon name={feature.icon as any} width="20" height="20" class="arabictouch-features-icon-symbol" /> :
            <LucideIcon name={data.icon as any} width="20" height="20" class="arabictouch-features-icon-symbol" />
          }
        </div>
        
        <!-- Feature Content -->
        <div class="arabictouch-features-content flex-1">
          <h3 class="arabictouch-features-title text-lg font-semibold mb-2">
            {feature.label}
          </h3>
          <p class="arabictouch-features-subtitle text-sm leading-relaxed">
            {feature.content}
          </p>
        </div>
      </div>
    ))}
  </div>
</section>